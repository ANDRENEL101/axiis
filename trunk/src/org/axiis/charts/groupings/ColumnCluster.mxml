<?xml version="1.0" encoding="utf-8"?>
<layouts:HorizontalBoxLayout xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:degrafa="http://www.degrafa.com/2007" name="outerlayout"
	xmlns:layouts="org.axiis.layouts.*"
	xmlns:scale="org.axiis.layouts.scale.*"
	xmlns:states="org.axiis.states.*" xmlns:utils="org.axiis.utils.*">
	
	<!-- public variables -->
	<mx:Script>
		<![CDATA[
			import org.axiis.core.ILayout;
			import com.degrafa.core.IGraphicsStroke;
			import com.degrafa.core.IGraphicsFill;

			
			public var labelFunction:Function;
			
			[Inspectable][Bindable]
			public var fill:IGraphicsFill;
			
			[Inspectable][Bindable]
			public var stroke:IGraphicsStroke;
			
			public static var LABEL_BOTTOM:int=0;
			public static var LABEL_COLUMN_BASE:int=1;
		]]>
	</mx:Script>
	
	<mx:Number id="percentGap">.05</mx:Number>
	<scale:LinearScale id="verticalScale"/>
	<mx:Number id="fontSize">12</mx:Number>
	<mx:Number id="fontColor">0</mx:Number>
	<mx:String id="fontFamily">Arial</mx:String>
	<mx:String id="fontWeight">normal</mx:String>
	<mx:Boolean id="showLabel">true</mx:Boolean>
	<mx:int id="labelVPos">0</mx:int>
	
	<utils:NumericExpression id="labelLayout" value="{((labelVPos==0) ? bounds.height+103 : (labelVPos==1) ? column.y+column.height+100+(currentValue >0 ? 0:-column.height-100): 0)}"/>
	
	<layouts:drawingGeometries>
			
		<!-- main column rectangle that gets repeated horizontally -->
		<degrafa:RegularRectangle id="column"  enableEvents="false"
				x="{currentReference.x}"
				y="{((currentValue &gt;=0) ? currentReference.height-this.verticalScale.valueToLayout(currentValue)-this.verticalScale.valueToLayout(0) : currentReference.height-this.verticalScale.valueToLayout(0))}"
				width="{currentReference.width}"
				height="{this.verticalScale.valueToLayout(currentValue)}"
				fill="{fill}"
				stroke="{stroke}"
				>
		</degrafa:RegularRectangle>
		
		<!-- smaller label for each column -->
		<degrafa:RasterText  enableEvents="false"
			 htmlText="{(labelFunction) ? labelFunction.call(this,currentDatum) : (currentLabel ? currentLabel:' ')}"  textColor="{fontColor}" visible="{showLabel}" id="label"
			x="{currentReference.x+(currentReference.width-20)/2}" height="20"  y="{labelLayout.value}" 
			fontSize="{fontSize}"  align="{(currentValue &lt; 0 &amp;&amp; labelVPos==1) ? 'left' : 'right'}" fontFamily="{fontFamily}" fontWeight="{fontWeight}">
			<degrafa:transform>
				<degrafa:RotateTransform angle="-90" registrationPoint="topLeft"/>
			</degrafa:transform>
		</degrafa:RasterText>
	</layouts:drawingGeometries>
</layouts:HorizontalBoxLayout>