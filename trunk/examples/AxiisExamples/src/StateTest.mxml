<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:axiis="http://www.axiis.org/2009"
	xmlns:geometry="org.axiis.charts.geometry.*"
	xmlns:degrafa="http://www.degrafa.com/2007"
	layout="absolute"
	creationComplete="start()" xmlns:states="org.axiis.states.*"
	mouseMove="updateFill()">

	<mx:Script>
		<![CDATA[
			import mx.effects.Blur;
			import com.degrafa.paint.SolidFill;
			import com.degrafa.core.IGraphicsFill;
			import mx.graphics.IFill;
			import org.axiis.data.DataSet;
			private function start():void
			{
				var ds:DataSet = new DataSet();
				ds.processXmlString(countryData);
				boxLayout.dataProvider = ds.data["someData"].country;
				vis.invalidateDisplayList();
			}
			
			private function updateFill():void
			{
				randomFill.color = int(0xff * (mouseY / height));
			}
		]]>
	</mx:Script>
	
	<mx:String id="countryData" source="/data/countryData.xml"/>
	
	<axiis:DataCanvas id="vis" width="100%" height="100%">
		<axiis:layouts>
			<axiis:HorizontalBoxLayout id="boxLayout" width="{vis.width}" height="{vis.height}" percentGap="0.01">
				<axiis:drawingGeometries>
					<geometry:Column id="col"
						x="{boxLayout.currentReference.x}"
						fill="{redFill}"
						dataField="competitors" labelField="name" height="{vis.height}">
					</geometry:Column>
				</axiis:drawingGeometries>
				<axiis:states>
					<states:State id="rollOverState"
						enterStateEvent="{MouseEvent.MOUSE_MOVE}"
						targets="{[col]}"
						properties="{['fill']}"
						values="{[randomFill]}"/>
					<states:State id="rollOutState"
						enterStateEvent="{MouseEvent.MOUSE_OUT}"
						targets="{[col]}"
						properties="{['fill']}"
						values="{[redFill]}"/>
				</axiis:states>
				
			</axiis:HorizontalBoxLayout>
		</axiis:layouts>
		
		<axiis:fills>
			<degrafa:SolidFill id="redFill" color="0xff0000"/>
			<degrafa:SolidFill id="randomFill" color="0xff"/>
		</axiis:fills>
	</axiis:DataCanvas>
	
</mx:Application>
