<?xml version="1.0" encoding="utf-8"?>
<layouts:BaseLayout xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:degrafa="http://www.degrafa.com/2007" name="outerlayout"
	xmlns:layouts="org.axiis.layouts.*"
	xmlns:scale="org.axiis.layouts.scale.*"
	xmlns:states="org.axiis.states.*"  xmlns:core="org.axiis.core.*">
	
	<!-- NOTE: Currently only tested for positive values -->
	
	<!-- public variables -->
	<mx:Script>
		<![CDATA[
			import com.degrafa.core.IGraphicsStroke;
			import com.degrafa.core.IGraphicsFill;
			
			[Inspectable][Bindable]
			public var fill:IGraphicsFill;
			
			[Inspectable][Bindable]
			public var stroke:IGraphicsStroke;
			
			
		]]>
	</mx:Script>
	
	<scale:LinearScale id="horizontalScale"/>
	<mx:Number id="fontSize">10</mx:Number>
	<mx:String id="fontFamily">Arial</mx:String>
	<mx:String id="fontWeight">normal</mx:String>
	<mx:Number id="fontColor">0</mx:Number>
	<mx:Boolean id="showLabel">true</mx:Boolean>

	
	<layouts:referenceRepeater>
		<core:GeometryRepeater dataProvider="{dataItems}">
			<core:geometry>
				<degrafa:RegularRectangle width="{0}" height="{height}" id="refRect" enableEvents="false"
					x="0" y="0"/> 
			</core:geometry>
			<core:modifiers>
				<core:PropertyModifier id="widthModifier" property="width" modifier="{this.horizontalScale.valueToLayout(currentValue)}" modifierOperator="none"/>
				<core:PropertyModifier id="xModifier" property="x" modifier="{(currentIndex == 0) ? 0 : this.horizontalScale.valueToLayout(dataItems[currentIndex-1][dataField])}" modifierOperator="add"/>
			</core:modifiers>
		</core:GeometryRepeater>	
	</layouts:referenceRepeater>
	<layouts:drawingGeometries>
			
		<!-- main column rectangle that gets repeated vertically -->
		<degrafa:RegularRectangle id="myBar" y="0"  enableEvents="false"
				x="{currentReference.x}"
				width="{currentReference.width}"
				height="{currentReference.height}"
				fill="{fill}"
				stroke="{stroke}"
				>
		</degrafa:RegularRectangle>
		
		<!-- smaller label for each column -->
		<degrafa:RasterText text="{(currentLabel ? currentLabel:' ')}" visible="{showLabel}"  enableEvents="false" id="label"
			x="{myBar.x+myBar.width-label.width}" height="15" width="70" y="{myBar.y+(myBar.height-label.height)/2}" 
			fontSize="{fontSize}" align="right" fontFamily="{fontFamily}" fontWeight="{fontWeight}" textColor="{fontColor}">
		</degrafa:RasterText>
	</layouts:drawingGeometries>
	<layouts:fills>
		<degrafa:SolidFill color="0xDDDD00" alpha=".6" id="rollOverFill"/>
	</layouts:fills>
	<layouts:strokes>
		<degrafa:SolidStroke id="rollOverStroke" weight="1" color="white"/>
	</layouts:strokes>
</layouts:BaseLayout>