<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:charts="org.axiis.charts.*" 
	layout="absolute"  backgroundGradientColors="[0xDDDDDD,0xF5F5F5]"
	creationComplete="start();" 
	xmlns:axiis="http://www.axiis.org/2009" xmlns:series="org.axiis.charts.series.*" xmlns:groupings="org.axiis.charts.groupings.*" xmlns:degrafa="http://www.degrafa.com/2007" xmlns:states="org.axiis.states.*" xmlns:paint="org.axiis.paint.*" xmlns:Examples="Examples.*" xmlns:axis="org.axiis.charts.axis.*" xmlns:labels="org.axiis.charts.labels.*" xmlns:core="org.axiis.core.*">

<mx:Style source="styles/Axiis_Examples.css"/>
<mx:Script>
		<![CDATA[
			import org.axiis.data.DataSet; 
			
			private var ds:DataSet = new DataSet(); 
			
			public function start():void
			{ 
				ds.processXmlString(countryData);
				//Aggregate the detailed data items
				ds.aggregateData(ds.data.object,"country",["total"]);
				ds.aggregateData(ds.data.object,"country",["competitors"]);
				//Aggegate the higher level items
				//ds.aggregateData(ds.data.object,"country",["aggregates.medal_count_sum"]);
				//vScale.maxValue=ds.data.object.aggregates['country_aggregates:medal_count_sum_max'];
				vScale.maxValue=ds.data.object.aggregates['country_total_max']; 
				hScale.maxValue=ds.data.object.aggregates['country_competitors_max']; 
				dataProvider=ds.data.object.country;
				dc.invalidateDisplayList();
			}
			
			
		]]>
</mx:Script> 
<Examples:ExampleBackground width="{this.width}" height="{this.height}" title="Horizontal Chart" subTitle="Clusters and Stacks"/>

<mx:String id="countryData" source="data/PlotData.xml"/>


<!--  GLOBAL VARIABLES -->
<mx:Object id="dataProvider"/>
<mx:String id="verticalField"/>
<mx:String id="dataField">medal</mx:String>
<mx:String id="labelField">name</mx:String>
<mx:String id="childDataField">count</mx:String>
<mx:String id="childLabelField">category</mx:String>
<mx:Number id="percentGap">.02</mx:Number>


	<axiis:LinearScale dataProvider="{dataProvider}" minLayout="0" minValue="0" maxLayout="{dc.height-50}" id="vScale"/>
	<axiis:LinearScale dataProvider="{dataProvider}" minLayout="0" minValue="0" maxLayout="{dc.width-50}" id="hScale"/>
	
	
	<axiis:DataCanvas top="100" bottom="120" width="{this.width*.8}" id="dc" verticalCenter="0" horizontalCenter="0" showDataTips="true">
	
		<!-- Background -->
		<axiis:backgroundGeometries>
			<core:BaseLayout width="{dc.width}" height="{plotLayout.height}">
				<core:layouts>
					<axis:VAxis verticalScale="{vScale}" tickStroke="{axisStroke}" width="{dc.width}" height="{plotLayout.height}" emitDataTips="false"
					fontFamily="Myriad Pro" fontColor="0" fontSize="14" tickGap="5"/>
					<axis:HAxis horizontalScale="{hScale}" tickStroke="{axisStroke}" width="{plotLayout.width}" height="{dc.height}" emitDataTips="false"
						 fontFamily="Myriad Pro" fontColor="0" fontSize="14" tickGap="5"/>
				</core:layouts>
			</core:BaseLayout>
		</axiis:backgroundGeometries>
	
		<!-- Layouts -->
		<axiis:layouts>
			<axiis:PlotGroup verticalScale="{vScale}" horizontalScale="{hScale}" verticalField="total" horizontalField="competitors" dataProvider="{dataProvider}" id="plotLayout" height="{dc.height-50}" width="{dc.width-50}" x="50">
			</axiis:PlotGroup>
		</axiis:layouts>
	</axiis:DataCanvas>
	 
	<degrafa:SolidStroke color="0x222222" id="axisStroke" pixelHinting="true"/>
	
	
</mx:Application>